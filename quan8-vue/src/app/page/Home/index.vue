<template>
	<div class="page-wrapper">
		<div class="header">
			<div class="top">
				<a>
					<div class="search">
						<span>
							<i class="iconfont icon-search"></i>
							输入商品名或粘贴宝贝标题搜索
						</span>
					</div>
				</a>
			</div>
			<div class='bottom'>
				<a class="choice">精选</a>
				<ul>
					<li><a>美食</a></li>
					<li><a>居家</a></li>
					<li><a>女装</a></li>
					<li><a>文娱</a></li>
					<li><a>男装</a></li>
					<li><a>母婴</a></li>
					<li><a>鞋品</a></li>
					<li><a>内衣</a></li>
					<li><a>篮球</a></li>
					<li><a>足球</a></li>
				</ul>
				<a class="more"><i class="iconfont icon-sort"></i></a>
			</div>
		</div>
		<div class="content">
			<div class="banner-bg">
				<div class="banner" ref="banner">
					<ul>
						<li><img src="./images/4.jpg" alt=""></li>
						<li><img src="./images/1.jpg" alt=""></li>
						<li><img src="./images/2.png" alt=""></li>
						<li><img src="./images/3.jpg" alt=""></li>
						<li><img src="./images/4.jpg" alt=""></li>
						<li><img src="./images/1.jpg" alt=""></li>
					</ul>
				</div>
			</div>
			<div class="activity">
				<a class="top"><img src="./images/7.gif" alt=""></a>
				<ul>
					<li><a><img src="./images/8.jpg" alt=""></a></li>
					<li><a><img src="./images/9.jpg" alt=""></a></li>
				</ul>
			</div>
			<div class="nav">
				<ul>
					<li>
						<a>
							<img src="./images/10.png" alt="">
							<p>9.9包邮</p>
						</a>
					</li>
					<li>
						<a>
							<img src="./images/11.png" alt="">
							<p>折上折</p>
						</a>
					</li>
					<li>
						<a>
							<img src="./images/13.gif" alt="">
							<p>疯狂排行</p>
						</a>
					</li>
					<li>
						<a>
							<img src="./images/14.png" alt="">
							<p>每日半价</p>
						</a>
					</li>
					<li>
						<a>
							<img src="./images/15.gif" alt="">
							<p>划算节</p>
						</a>
					</li>
				</ul>
			</div>
			<div class="hot">
				<a class="top"><img src="./images/16.gif" alt=""></a>
				<ul class="bottom">
					<li><a><img src="./images/17.jpg" alt=""></a></li>
					<li><a><img src="./images/18.jpg" alt=""></a></li>
					<li><a><img src="./images/19.jpg" alt=""></a></li>
					<li><a><img src="./images/20.jpg" alt=""></a></li>
				</ul>
			</div>
			<div class="sale">
				<h3>品牌特卖</h3>
				<ul>
					<li>
						<img src="./images/21.jpg" alt="">
					</li>
					<li>
						<img src="./images/22.jpg" alt="">
					</li>
					<li>
						<img src="./images/23.jpg" alt="">
					</li>
					<li>
						<img src="./images/24.jpg" alt="">
					</li>
					<li>
						<img src="./images/25.jpg" alt="">
					</li>
					<li>
						<img src="./images/26.jpg" alt="">
					</li>
					<li>
						<img src="./images/27.jpg" alt="">
					</li>
					<li>
						<img src="./images/28.jpg" alt="">
					</li>
				</ul>
			</div>
			<div class="product">
				<h2>发现好货</h2>
				<ul>
					<li>
						<a>
							<img src="./images/29.jpg" alt="">
							<p class="title">【拍3件】韩国可莱丝针剂水库面膜</p>
							<div class="group">
								<span class="label1">10元券</span>
								<span class="label2">官方旗舰店</span>
							</div>
							<p class="price">券后  ¥ <span>168</span></p>
							<div class="more">
								<p>天猫 ¥<span>178</span></p>
								<span>已售 <span>4万</span></span>
							</div>
						</a>
					</li>
					<li>
						<a>
							<img src="./images/30.jpg" alt="">
							<p class="title">【潮流ins风】秋季韩版牛仔裤破洞裤</p>
							<div class="group">
								<span class="label1">20元券</span>
								<span class="label2">官方旗舰店</span>
							</div>
							<p class="price">券后  ¥ <span>388</span></p>
							<div class="more">
								<p>天猫 ¥<span>390</span></p>
								<span>已售 <span>15万</span></span>
							</div>
						</a>
					</li>
					<li>
						<a>
							<img src="./images/31.jpg" alt="">
							<p class="title">第二件9.9，第三件9.9【良品铺子礼包</p>
							<div class="group">
								<span class="label1">5元券</span>
								<span class="label2">官方旗舰店</span>
							</div>
							<p class="price">券后  ¥ <span>90</span></p>
							<div class="more">
								<p>天猫 ¥<span>120</span></p>
								<span>已售 <span>52万</span></span>
							</div>
						</a>
					</li>
					<li>
						<a>
							<img src="./images/32.jpg" alt="">
							<p class="title">挂耳式无线运动蓝牙耳机5.0双耳</p>
							<div class="group">
								<span class="label1">30元券</span>
								<span class="label2">官方旗舰店</span>
							</div>
							<p class="price">券后  ¥ <span>555</span></p>
							<div class="more">
								<p>天猫 ¥<span>600</span></p>
								<span>已售 <span>3.2万</span></span>
							</div>
						</a>
					</li>
					<li>
						<a>
							<img src="./images/33.jpg" alt="">
							<p class="title">【闪格】网红速干吹风机 贼好用</p>
							<div class="group">
								<span class="label1">10元券</span>
								<span class="label2">官方旗舰店</span>
							</div>
							<p class="price">券后  ¥ <span>365</span></p>
							<div class="more">
								<p>天猫 ¥<span>380</span></p>
								<span>已售 <span>4.2万</span></span>
							</div>
						</a>
					</li>
					<li>
						<a>
							<img src="./images/34.jpg" alt="">
							<p class="title">【买一送一】多拍多送巧克力礼盒装</p>
							<div class="group">
								<span class="label1">10元券</span>
								<span class="label2">官方旗舰店</span>
							</div>
							<p class="price">券后  ¥ <span>200</span></p>
							<div class="more">
								<p>天猫 ¥<span>230</span></p>
								<span>已售 <span>10万</span></span>
							</div>
						</a>
					</li>
				</ul>
			</div>
		</div>
		<div class="footer">
			<Nav/>
		</div>
	</div>
</template>

<script type="text/ecmascript-6">
	import Nav from '../../components/Nav';
        import imagesLoaded from 'imagesloaded';
        import IScroll from 'iscroll';

	export default {
	        components: { Nav },
		methods: {
                        _initBannerScroll() {
                                this.$nextTick(() => {
                                        imagesLoaded(this.$refs.banner, () => {
                                                this.bannerScroll = new IScroll(this.$refs.banner, {
                                                        scrollY: false, //关闭纵向滚动
                                                        scrollX: true, //开启横向滚动
                                                        momentum: false, //关闭惯性滚动
                                                        snap: true //开启轮播图滚动
                                                });
                                                this.bannerScroll.on('scrollStart', () => {
                                                        clearTimeout(this.timer); //停止自动播放
                                                });
                                                this.bannerScroll.on('scrollEnd', () => {
                                                        // 调整整个滚动条的位置， 实现无缝滚动
                                                        let len = 6;
                                                        if (this.bannerScroll.currentPage.pageX === 0) {
                                                                this.bannerScroll.disable(); //调整期间，禁止滚动
                                                                setTimeout(() =>{
                                                                        this.bannerScroll.goToPage(len - 2, 0, 0);
                                                                        this.bannerScroll.enable(); //调整结束，恢复滚动
                                                                }, 10);
                                                        }
                                                        if (this.bannerScroll.currentPage.pageX === len - 1) {
                                                                this.bannerScroll.disable(); //调整期间，禁止滚动
                                                                setTimeout(() =>{
                                                                        this.bannerScroll.goToPage(1, 0, 0);
                                                                        this.bannerScroll.enable(); //调整结束，恢复滚动
                                                                }, 10);
                                                        }
                                                        this.timer = setTimeout(() => this.bannerScroll.next(),3000);
                                                });
                                                this.bannerScroll.goToPage(1,0,0);   //初始化显示第二页（第一张图片片）
                                                this.bannerIndex = 1;                           //记录当前更新时第几张
                                                this.timer = setTimeout(() => this.bannerScroll.next(),3000);//开始自动播放
                                        });
                                });
                        },
		},
		created() {
	                this._initBannerScroll();
		}

	};
</script>

<style lang="stylus" rel="stylesheet/stylus" scoped>
	.page-wrapper
		width: 100%
		height: 100%
		display: flex
		flex-direction: column
		.header
			flex-shrink: 0
			height: 1.8rem
			background: #fe3a33
			.top
				height: 0.65rem
				padding: 0.15rem 0.3rem 0.1rem
				a
					display: block
					width: 100%
					height: 100%
					.search
						width: 100%
						height: 100%
						border: 1px solid #b0b0b0
						border-radius: 0.4rem
						background-color: #fff
						span
							padding-left: 0.2rem
							line-height: 0.65rem
							color: #999
							font-size: 0.27rem
							font-weight: 400
							i
								font-size: 0.4rem
								vertical-align: middle
			.bottom
				display: flex
				height: 0.9rem
				padding: 0 0.3rem
				a.choice
					flex-shrink: 0
					width: 0.7rem
					height: 0.9rem
					text-align: center
					line-height: 0.9rem
					font-size: 0.32rem
					color: #fff
				ul
					flex-grow: 1
					display: flex
					width: 90%
					overflow: auto
					li
						width: 1.1rem
						height: 100%
						a
							display: block
							width: 1.1rem
							height: 100%
							text-align: center
							line-height: 0.9rem
							font-size: 0.28rem
							color: rgba(255,255,255,.65)
				a.more
					flex-shrink: 0
					width: 0.45rem
					height: 0.9rem
					text-align: right
					line-height: 0.9rem
					color: #fff
					i
						font-size: 0.4rem
		.content
			flex-grow: 1
			margin: 0 auto
			background-color: rgb(246, 246, 246)
			overflow: auto
			.banner-bg
				height: 2.3rem
				background: #fe3a33
				padding: 0 0.2rem
				.banner
					overflow: hidden
					padding: 0
					touch-action: pan-x
					border-radius: 0.1rem
					ul
						display: flex
						width: 600%
						li
							flex-grow: 1
							font-size: 0
							img
								width: 100%
			.activity
				padding: 1rem 0.2rem 0
				a.top
					img
						width: 100%
				ul
					width: 100%
					display: flex
					flex-wrap: wrap
					justify-content: space-between
					li
						width: 49%
						a
							img
								width: 100%
			.nav
				margin: 0.1rem 0.2rem 0
				background: #fff
				border-radius: 0.1rem 0.1rem 0 0
				ul
					padding: .17rem .07rem .13rem .06rem
					display: flex
					box-sizing: border-box
					justify-content: space-between
					li
						text-align: center
			.hot
				padding: 0.2rem 0.2rem 0.1rem
				a.top
					img
						width: 100%
				ul.bottom
					width: 100%
					display: flex
					flex-wrap: wrap
					justify-content: space-between
					li
						margin-top: 0.1rem
						width: 49%
						background-color: #fff
						border-radius 0.15rem
						a
							img
								width: 100%
			.sale
				padding: .12rem .12rem 0.2rem
				background: #fff
				border-radius: .05rem
				margin: 0.12rem 0.2rem 0
				h3
					padding: 0.2rem 0.2rem
					font-weight: normal
					font-size: 0.3rem
				ul
					display: flex
					flex-wrap: wrap
					justify-content: space-between
					li
						width: 23%
						img
							width: 100%
			.product
				padding: 0 0.2rem 0.3rem
				h2
					margin: 0.4rem auto
					text-align center
					font-size: 0.3rem
					font-weight: normal
					background: url("images/product.png") no-repeat center center
				ul
					width: 100%
					display: flex
					flex-wrap: wrap
					justify-content: space-between
					li
						margin-top: 0.2rem
						width: 48%
						background-color: #fff
						border-radius 0.15rem
						a
							img
								width: 100%
							p.title
								padding: 0.2rem
								font-size: 0.24rem
							.group
								padding: 0 0.2rem
								span.label1
									border: 0;
									background: linear-gradient(90deg,#ff8873 0,#ff4f4f 100%);
									color: #FFF;
									font-size: 0.2rem
									text-align: cneter
									border-radius: 0.03rem
									padding: 0 0.06rem
								span.label2
									border: .01rem solid #ff9793
									color: #ff9793
									padding: 0 0.06rem
									font-size: 0.2rem
									border-radius: 0.05rem
							p.price
								padding: 0.1rem 0.2rem
								color: #ff3b32
								span
									font-size: 0.34rem
							.more
								padding: 0 0.2rem 0.2rem
								display: flex
								justify-content: space-between
								color: #999
		.footer
			width: 100%
			height: 1rem
			flex-shrink: 0
			border-top: 1px solid #b0b0b0
</style>